<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="My FreeBSD Setup">
<link rel="alternate"
      type="application/rss+xml"
      href="./rss.xml"
      title="RSS feed for ./">
<title>My FreeBSD Setup</title>
<meta name="author" content="ThanhVu Nguyen">
<meta name="referrer" content="no-referrer">
<link rel="stylesheet" type="text/css" href="https://dynaroars.github.io/files/org.css" />
<link href= "../files/org-orig.css" rel="stylesheet" type="text/css" /> 
<link rel="icon" href="../files/favicon.ico">
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
</script>
</head>
<body>
<div id="preamble" class="status"><div class="header">
  <a href="../index.html">ThanhVu Nguyen</a>,  
  <a href="index.html">Archive</a>
</div>
</div>
<div id="content">
<div class="post-date">04 Sep 2022</div><h1 class="post-title"><a href="./freebsd.html">My FreeBSD Setup</a></h1>
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgf418f95">1. Timeline</a></li>
<li><a href="#org63375dc">2. Machine Specs</a></li>
<li><a href="#org1cc873d">3. Installation</a></li>
<li><a href="#org1d97928">4. Using</a>
<ul>
<li><a href="#orgcac4397">4.1. Installing Things</a></li>
<li><a href="#orgf368094">4.2. KDE</a></li>
</ul>
</li>
<li><a href="#org259edb1">5. Other stuff</a>
<ul>
<li><a href="#org5dfe5a7">5.1. Things that don't work</a></li>
<li><a href="#orgbdc5f70">5.2. My .dot files</a></li>
</ul>
</li>
<li><a href="#orgaf54885">6. Thoughts</a></li>
</ul>
</div>
</nav>

<figure id="orgb7d35a7">
<img src="../files/freebsd-vl.jpg" alt="freebsd-vl.jpg" width="50%" height="50%">

</figure>

<p>
My home machine, which was running Debian and was built in 2007, was becoming old and loud. So, I decided to set up a new home system on a small <b>Dell Optiplex</b> that I obtained from school. I decided to install FreeBSD on it instead of my preferred Debian Linux (because &#x2026; why not? my <a href="https://dynaroars.github.io/">lab</a> already has two servers running Debian).
</p>


<p>
This is the first time that I seriously use FreeBSD (I tried it before for a couple of weeks and went back to Linux). Below is my experience.
</p>

<div id="outline-container-orgf418f95" class="outline-2">
<h2 id="orgf418f95"><span class="section-number-2">1.</span> Timeline</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li><p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2023-01-21 Sat&gt; </span></span> &#x2013; <span class="timestamp-wrapper"><span class="timestamp">&lt;2023-02-18 Sat&gt; </span></span> <code>Thunderbird</code> was updated to a version that doesn't supported OAuth and it was almost a month later that it finally got the new update to fix the issue. Really annoying.
</p></li>
</ul>

<figure id="org38c9d57">
<img src="../files/freebsd-capital.png" alt="freebsd-capital.png" width="50%" height="50%">

</figure>
<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2022-10-07 Fri&gt; </span></span> Things are going strong. Using the machine everyday when I am at home.</li>
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2022-09-14 Wed&gt; </span></span> Add a Dell Ultrasharp 43" monitor</li>
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2022-09-08 Thu&gt; </span></span> Got the <a href="https://nostarch.com/absfreebsd3">Asolute FreeBSD</a> book &#x2013; it has ben a while since I bought a computer book</li>
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2022-09-05 Mon&gt; </span></span> Setup FreeBSD on Dell Optiplex</li>
</ul>
</div>
</div>


<div id="outline-container-org63375dc" class="outline-2">
<h2 id="org63375dc"><span class="section-number-2">2.</span> Machine Specs</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-txt">```                        `       tnguyen@ROARS 
  ` `.....---.......--.```   -/    ------------- 
  +o   .--`         /y:`      +.   OS: FreeBSD 13.1-RELEASE-p5 amd64 
   yo`:.            :o      `+-    Uptime: 24 days, 1 hour, 6 mins 
    y/               -/`   -o/     Packages: 1443 (pkg) 
   .-                  ::/sy+:.    Shell: fish 3.6.0 
   /                     `--  /    Resolution: 3840x2160 
  `:                          :`   DE: Plasma 5.26.5 
  `:                          :`   WM: KWin 
   /                          /    Theme: [Plasma], Emacs [GTK2/3] 
   .-                        -.    Icons: [Plasma], breeze [GTK2/3] 
    --                      -.     Terminal: tmux 
     `:`                  `:`      CPU: Intel i7-7700 (8) @ 3.600GHz 
       .--             `--.        GPU: HD Graphics 630 
          .---.....----.           Memory: 20354MiB / 32434MiB 
</pre>
</div>
</div>
</div>

<div id="outline-container-org1cc873d" class="outline-2">
<h2 id="org1cc873d"><span class="section-number-2">3.</span> Installation</h2>
<div class="outline-text-2" id="text-3">
<p>
Installation was straight-forward by downloading and installing <a href="https://download.freebsd.org/releases/amd64/amd64/ISO-IMAGES/13.1/">the ISO</a>. 
Then for installation I pretty much just accepted all default options. I believe I unchecked all server capabilities during installation because this will be used mainly as a desktop, and not a server.
</p>

<p>
FreeBSD doesn't seem to give me an option to install software (e.g., X, desktop environment, ..). That is fine, I can install them later.
</p>

<p>
Installation was so quick that I couldn't see what was being installed.
</p>
</div>
</div>

<div id="outline-container-org1d97928" class="outline-2">
<h2 id="org1d97928"><span class="section-number-2">4.</span> Using</h2>
<div class="outline-text-2" id="text-4">
<p>
After the first boot I then logged in as root to update the system, install <code>X</code>, <code>KDE</code>, <code>emacs</code>, and various things. But I didn't really know to do any of these. So I openned my iPad and go to read FreeBSD manual.
</p>
</div>

<div id="outline-container-orgcac4397" class="outline-3">
<h3 id="orgcac4397"><span class="section-number-3">4.1.</span> Installing Things</h3>
<div class="outline-text-3" id="text-4-1">
<p>
From the manual, I've learned various new commands for upgrading and installing software and so
</p>
<pre class="example">
# updating the system
freebsd-upgrade fetch
freebsd-upgrade install

# updating package
pkg upgrade
</pre>

<p>
Next is installing and using X, which I encountered some problems.  This is mainly because of me, as I didn't even know what graphic card this computer has other than some integrated one (likely Intel).
</p>

<pre class="example">
# installing X was easy
pkg install xorg
</pre>

<p>
Installing X is easy, then I tried <code>startx</code> and it failed immediately, which is not surprising because I haven't configured any graphic driver. I then tried the Linux way which is editing <code>xorg.conf</code> file, and I found the FreeBSD manual also has section about doing this. So I spent half an hr doing this without much success (because the <a href="https://docs.freebsd.org/en/books/handbook/x11/">manual</a> says use "intel" as Driver). It was pretty late and I was so sleepy to debug and so went to bed.
</p>

<p>
On the next day, I quickly googled for FreeBSD, X, Intel and fond out that the correct dirver is <code>i915kms</code> (not <code>intel</code>). Moreover, I shouldn't even have to edit <code>xorg.con</code> or any file, everything should be automatically detected and loaded.  Anyway, don't remember all the details but I think I did something like below
</p>

<pre class="example">
pkg install drm-kmod


# /etc/rc.conf
kld_list="i915kms"
dbus_enable="YES"  # for KDE
</pre>


<p>
Now <code>startx</code> works and so I don't need use <code>root</code> and so added the username I created to the <code>video</code> group and log in using that username (I also found out that I cannot <code>su</code> to root and then had to also add my username to <code>wheel</code>).
</p>
</div>
</div>

<div id="outline-container-orgf368094" class="outline-3">
<h3 id="orgf368094"><span class="section-number-3">4.2.</span> KDE</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Anyway, I then installed KDE, created a simple  <code>~/.xinitrc</code> file
</p>
<pre class="example">
exec ck-launch-session startplasma-x11
</pre>

<p>
and <code>startx</code> to start KDE.
</p>

<ul class="org-ul">
<li>Why KDE? In the past I typically used either <a href="https://www.windowmaker.org/">WindowMaker</a> or <a href="https://www.trinitydesktop.org/">Trinity</a> desktop. I wanted to try something new. I probably will switch back to WindowMaker soon, but so far I like that the new KDE because it allows me to perform  natural (invert) mouse scrolling in Firefox (when I was in Linux I was never able to get Firefox to do this kind of scrolling with Trinity or WindowMaker).</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org259edb1" class="outline-2">
<h2 id="org259edb1"><span class="section-number-2">5.</span> Other stuff</h2>
<div class="outline-text-2" id="text-5">
<p>
I was able to install Firefox and Thunderbird and setup my mails. Pretty straightforward.
</p>
</div>

<div id="outline-container-org5dfe5a7" class="outline-3">
<h3 id="org5dfe5a7"><span class="section-number-3">5.1.</span> Things that don't work</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>Sometimes it won't automatically turn off my monitor. Never had this problem with the older, smaller monitor.</li>
<li>Can't get my Canon printer to work. It sees the printer (wireless) but Canon does not have the driver for this printer for BSD.</li>
<li>Slack is not available on FreeBSD, so I had to run it inside Firefox.</li>
<li><del>I can't get my monitor to output any sound. The monitor has a speaker. And KDE reports that sound driver working fine, but I can't hear any sound</del>.
<ul class="org-ul">
<li>got this to work, not sure how though.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgbdc5f70" class="outline-3">
<h3 id="orgbdc5f70"><span class="section-number-3">5.2.</span> My .dot files</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li><code>/boot/loader.conf</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-bash">kern.geom.label.disk_ident.enable=<span style="color: #98be65;">"0"</span>
kern.geom.label.gptid.enable=<span style="color: #98be65;">"0"</span>
<span style="color: #dcaeea;">cryptodev_load</span>=<span style="color: #98be65;">"YES"</span>
<span style="color: #dcaeea;">zfs_load</span>=<span style="color: #98be65;">"YES"</span>
kern.vty=vt
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">snd_hda_load="YES"</span>
<span style="color: #dcaeea;">snd_driver_load</span>=<span style="color: #98be65;">"YES"</span>
</pre>
</div>

<ul class="org-ul">
<li><code>/etc/rc.conf</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #dcaeea;">hostname</span>=<span style="color: #98be65;">"ROARS"</span>
<span style="color: #dcaeea;">ifconfig_em0</span>=<span style="color: #98be65;">"DHCP"</span>
<span style="color: #dcaeea;">ifconfig_em0_ipv6</span>=<span style="color: #98be65;">"inet6 accept_rtadv"</span>
<span style="color: #dcaeea;">sshd_enable</span>=<span style="color: #98be65;">"YES"</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Set dumpdev to "AUTO" to enable crash dumps, "NO" to disable</span>
<span style="color: #dcaeea;">dumpdev</span>=<span style="color: #98be65;">"AUTO"</span>
<span style="color: #dcaeea;">zfs_enable</span>=<span style="color: #98be65;">"YES"</span>
<span style="color: #dcaeea;">kld_list</span>=<span style="color: #98be65;">"i915kms"</span>
<span style="color: #dcaeea;">dbus_enable</span>=<span style="color: #98be65;">"YES"</span>
<span style="color: #dcaeea;">ntpd_enable</span>=<span style="color: #98be65;">"YES"</span>
<span style="color: #dcaeea;">cupsd_enable</span>=<span style="color: #98be65;">"YES"</span>
<span style="color: #dcaeea;">devfs_system_ruleset</span>=<span style="color: #98be65;">"system"</span>
<span style="color: #dcaeea;">coretemp_load</span>=<span style="color: #98be65;">"YES"</span>
<span style="color: #dcaeea;">sendmail_enable</span>=<span style="color: #98be65;">"NONE"</span>
<span style="color: #dcaeea;">sddm_enable</span>=<span style="color: #98be65;">"yes"</span>
</pre>
</div>

<ul class="org-ul">
<li><code>~/.config/gtk-3.0/settings.ini</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-txt">[Settings]
gtk-application-prefer-dark-theme=false
gtk-button-images=true
gtk-cursor-theme-name=breeze_cursors
gtk-cursor-theme-size=24
gtk-decoration-layout=icon:minimize,maximize,close
gtk-enable-animations=false
gtk-font-name=Hack,  10
gtk-icon-theme-name=breeze
gtk-key-theme-name=Emacs
gtk-menu-images=true
gtk-modules=colorreload-gtk-module:window-decorations-gtk-module
gtk-primary-button-warps-slider=false
gtk-theme-name=Emacs
gtk-toolbar-style=3
gtk-xft-dpi=98304
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaf54885" class="outline-2">
<h2 id="orgaf54885"><span class="section-number-2">6.</span> Thoughts</h2>
<div class="outline-text-2" id="text-6">
<p>
I have been using FreeBSD for only three days, during which my son has already explored and played various KDE games on it. It doesn't feel much different from my old Debian desktop, though the new machine is very quiet when compared to my old computer. I was able to start working and being productive on it right away.
</p>
</div>
</div>
<div class="taglist"><a href="./tags.html">Tags</a>: <a href="./tag-computer.html">computer</a> <a href="./tag-setup.html">setup</a> <a href="./tag-blog.html">blog</a> <a href="./tag-bsd.html">bsd</a> </div></div>
<div id="postamble" class="status"><!-- <div id="archive"><a href="archive.html">Other posts</a></div>  -->
</div>
</body>
</html>
